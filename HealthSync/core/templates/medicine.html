{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container py-5">
    <div class="row">
        <!-- Sidebar Filter Section -->
        <div class="col-md-3">
            <!-- Price Range Filter with Dual Slider -->
            <div class="card shadow-sm mb-3" style="border-radius: 8px;">
                <div class="card-header bg-primary text-white text-center py-2" style="border-radius: 8px 8px 0 0;">
                    <h6 class="mb-0">Price Range</h6>
                </div>
                <div class="card-body py-2">
                    <div class="range-slider">
                        <input type="range" class="form-range" min="0" max="5000" step="100" id="minPrice" value="1500">
                        <input type="range" class="form-range" min="0" max="5000" step="100" id="maxPrice" value="5000">
                    </div>
                    <div class="d-flex justify-content-between mt-2">
                        <span id="minPriceLabel">1500</span>
                        <span id="maxPriceLabel">5,000</span>
                    </div>
                </div>
            </div>

            <!-- Accordion Filters -->
            <div class="accordion" id="filterAccordion">
                <!-- Availability Filter -->
                <div class="card shadow-sm mb-3" style="border-radius: 8px;">
                    <div class="card-header bg-primary text-white text-center py-2" style="border-radius: 8px 8px 0 0;">
                        <h6 class="mb-0">Availability</h6>
                    </div>
                    <div class="card-body py-2">
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="inStock" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="inStock" style="font-size: 0.9rem;">In Stock</label>
                        </div>
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="preOrder" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="preOrder" style="font-size: 0.9rem;">Pre Order</label>
                        </div>
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="outOfStock" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="outOfStock" style="font-size: 0.9rem;">Out of Stock</label>
                        </div>
                    </div>
                </div>

                <!-- Brand Filter -->
                <div class="card shadow-sm mb-3" style="border-radius: 8px;">
                    <div class="card-header bg-primary text-white text-center py-2" style="border-radius: 8px 8px 0 0;">
                        <h6 class="mb-0">Brand</h6>
                    </div>
                    <div class="card-body py-2">
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="brandA" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="brandA" style="font-size: 0.9rem;">Brand A</label>
                        </div>
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="brandB" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="brandB" style="font-size: 0.9rem;">Brand B</label>
                        </div>
                    </div>
                </div>

                <!-- Form Filter -->
                <div class="card shadow-sm mb-3" style="border-radius: 8px;">
                    <div class="card-header bg-primary text-white text-center py-2" style="border-radius: 8px 8px 0 0;">
                        <h6 class="mb-0">Form</h6>
                    </div>
                    <div class="card-body py-2">
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="tablet" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="tablet" style="font-size: 0.9rem;">Tablet</label>
                        </div>
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="capsule" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="capsule" style="font-size: 0.9rem;">Capsule</label>
                        </div>
                        <div class="form-check my-1">
                            <input class="form-check-input" type="checkbox" id="syrup" style="transform: scale(1.1);">
                            <label class="form-check-label ms-2" for="syrup" style="font-size: 0.9rem;">Syrup</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Grid Section -->
        <div class="col-md-9">
            <div class="d-flex justify-content-between mb-3">
                <h5>Medicines</h5>
                <div class="dropdown">
                    <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        Sort By: Default
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                        <li><a class="dropdown-item" href="#">Price: Low to High</a></li>
                        <li><a class="dropdown-item" href="#">Price: High to Low</a></li>
                        <li><a class="dropdown-item" href="#">New Arrivals</a></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <!-- Medicine Item 1 -->
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="card h-100 shadow-sm" style="border-radius: 8px;">
                        <span class="badge bg-danger position-absolute top-0 start-0 m-2">Save: 200৳</span>
                        <img src="{% static 'img/medicine-1.jpg' %}" class="card-img-top p-2 rounded" alt="Medicine Name">
                        <div class="card-body text-center p-2">
                            <h6 class="card-title mb-1" style="font-size: 1rem;">Paracetamol 500mg</h6>
                            <p class="card-text text-muted small mb-1">Relieves pain and reduces fever.</p>
                            <p><strong class="text-primary">400৳</strong> <del class="text-muted small">600৳</del></p>
                            <a href="#" class="btn btn-primary btn-sm w-100 mb-1">Buy Now</a>
                            <a href="#" class="btn btn-outline-secondary btn-sm w-100">Add to Cart</a>
                        </div>
                    </div>
                </div>

                <!-- Medicine Item 2 -->
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="card h-100 shadow-sm" style="border-radius: 8px;">
                        <span class="badge bg-danger position-absolute top-0 start-0 m-2">Save: 100৳</span>
                        <img src="{% static 'img/medicine-2.jpg' %}" class="card-img-top p-2 rounded" alt="Medicine Name">
                        <div class="card-body text-center p-2">
                            <h6 class="card-title mb-1" style="font-size: 1rem;">Ibuprofen 400mg</h6>
                            <p class="card-text text-muted small mb-1">Reduces pain, inflammation, and fever.</p>
                            <p><strong class="text-primary">400৳</strong> <del class="text-muted small">500৳</del></p>
                            <a href="#" class="btn btn-primary btn-sm w-100 mb-1">Buy Now</a>
                            <a href="#" class="btn btn-outline-secondary btn-sm w-100">Add to Cart</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    const minPriceSlider = document.getElementById('minPrice');
    const maxPriceSlider = document.getElementById('maxPrice');
    const minPriceLabel = document.getElementById('minPriceLabel');
    const maxPriceLabel = document.getElementById('maxPriceLabel');
    const minGap = 100;

    // Ensure the sliders move within range and update labels
    minPriceSlider.addEventListener('input', () => {
        const minPrice = parseInt(minPriceSlider.value);
        const maxPrice = parseInt(maxPriceSlider.value);

        if (minPrice >= maxPrice - minGap) {
            minPriceSlider.value = maxPrice - minGap;
        }
        minPriceLabel.textContent = minPriceSlider.value;
    });

    maxPriceSlider.addEventListener('input', () => {
        const minPrice = parseInt(minPriceSlider.value);
        const maxPrice = parseInt(maxPriceSlider.value);

        if (maxPrice <= minPrice + minGap) {
            maxPriceSlider.value = minPrice + minGap;
        }
        maxPriceLabel.textContent = maxPriceSlider.value;
    });

    // Initialize display values on load
    minPriceLabel.textContent = minPriceSlider.value;
    maxPriceLabel.textContent = maxPriceSlider.value;
</script>

<style>
    .range-slider {
        position: relative;
        height: 1rem;
        margin-top: 10px;
    }

    .range-slider input[type="range"] {
        position: absolute;
        width: 100%;
        -webkit-appearance: none;
        background: none;
        pointer-events: none;
    }

    .range-slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        pointer-events: all;
        width: 1rem;
        height: 1rem;
        background: #007bff;
        border-radius: 50%;
        cursor: pointer;
        margin-top: -5px; /* Center thumb vertically */
        border: 2px solid white; /* Add white border for contrast */
    }

    .range-slider input[type="range"]::-moz-range-thumb {
        width: 1rem;
        height: 1rem;
        background: #007bff;
        border-radius: 50%;
        cursor: pointer;
        border: 2px solid white;
    }
</style>
{% endblock %}
